<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>输入文本处理工具</title>
<style>
    body {
        background: linear-gradient(to bottom, #F8F8FF, #DDA0DD);
    }

    textarea {
        width: 100%;
        height: 200px;
        resize: none;
    }
</style>
</head>
<body>
<div style="text-align:center;"><p>去序号/去空格/全角半角转化工具</p></div>
    <label for="inputText">输入文本：</label><br>
    <textarea id="inputText">[19]李示例。本示例存在数字序号   多余空格 全角符号以及全角数字问题[J].法治研究，２０23（03)：148-160.</textarea><br>
    <input type="checkbox" id="selectAll" onchange="toggleAllCheckboxes()">
    <label for="selectAll">全选</label><br>
    <input type="checkbox" id="removeNumbers">
    <label for="removeNumbers">去掉数字序号</label><br>
    <input type="checkbox" id="removeSpaces">
    <label for="removeSpaces">去除空格</label><br>
    <input type="checkbox" id="convertSymbols">
    <label for="convertSymbols">将全角符号转换为半角符号</label><br>
    <input type="checkbox" id="convertNumbers">
    <label for="convertNumbers">将全角数字转换为半角数字</label><br>
    <button onclick="transformText()">转换</button>
    <button onclick="copyOutputText()">一键复制</button><br>
    <label for="outputText">输出文本：</label><br>
    <textarea id="outputText" readonly></textarea>

    <script>
        function toggleAllCheckboxes() {
            var selectAllCheckbox = document.getElementById("selectAll");
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            for (var i = 0; i < checkboxes.length; i++) {
                checkboxes[i].checked = selectAllCheckbox.checked;
            }
        }

        function transformText() {
            var inputText = document.getElementById("inputText").value;
            var removeNumbersCheckbox = document.getElementById("removeNumbers");
            var removeSpacesCheckbox = document.getElementById("removeSpaces");
            var convertSymbolsCheckbox = document.getElementById("convertSymbols");
            var convertNumbersCheckbox = document.getElementById("convertNumbers");
            var outputText = document.getElementById("outputText");
            var lines = inputText.split("\n");
            var output = "";

            for (var i = 0; i < lines.length; i++) {
                var line = lines[i];
                if (removeNumbersCheckbox.checked) {
                    // 使用正则表达式去除数字序号
                    line = line.replace(/^\[\d+\]/, "").trim();
                }
                if (removeSpacesCheckbox.checked) {
                    // 去除空格
                    line = line.replace(/\s/g, "");
                }
                if (convertSymbolsCheckbox.checked) {
                    // 将全角符号转换为半角符号
                    line = line.replace(/：/g, ":");
                    line = line.replace(/。/g, ".");
                    line = line.replace(/，/g, ",");
                    line = line.replace(/；/g, ";");
                    line = line.replace(/（/g, "(");
                    line = line.replace(/）/g, ")");
                }
                if (convertNumbersCheckbox.checked) {
                    // 将全角数字转换为半角数字
                    line = line.replace(/１/g, "1");
                    line = line.replace(/２/g, "2");
                    line = line.replace(/３/g, "3");
                    line = line.replace(/４/g, "4");
                    line = line.replace(/５/g, "5");
                    line = line.replace(/６/g, "6");
                    line = line.replace(/７/g, "7");
                    line = line.replace(/８/g, "8");
                    line = line.replace(/９/g, "9");
                    line = line.replace(/０/g, "0");
                }
                output += line + "\n";
            }

            outputText.value = output.trim();
        }

        function copyOutputText() {
            var outputText = document.getElementById("outputText");
            outputText.select();
            document.execCommand("copy");
            alert("已复制到剪贴板！");
        }
    </script>
    <div style="text-align:center;"><p>南京大学法学院Chollima制作</p></div>
    <div style="text-align:center;"><p>版权所有  禁止用于营利目的</p></div>
</body>
</html>
